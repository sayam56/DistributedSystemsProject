{% extends "base.html" %}

{% block title %}Prediction{% endblock %}

{% block content %}
    <h2>This is our Prediction page</h2>
    <div class="container">
        <header>
            <!-- Navigation and header content here -->
        </header>

        <section class="stock-information">
            <h2>Information</h2>
            <table>
                <!-- Dynamic content from Django context -->
                <tr>
                    <th>Symbol</th>
                    <td>{{ stock_info.symbol }}</td>
                </tr>
                <tr>
                    <th>Name</th>
                    <td>{{ stock_info.name }}</td>
                </tr>
                <!-- Additional rows for stock info -->
            </table>
            <button>Show More</button>
        </section>

        <section class="stock-charts">
            <h2>Recent Stock Price of {{ stock_info.symbol }}</h2>
            <div id="live-chart">
                <!-- Plotly chart for recent stock prices would be here if provided -->
            </div>

            <h2>Predicted Stock Price of {{ stock_info.symbol }} for the next 10 days</h2>
            <div id="prediction-chart">
                <!-- The Plotly chart for predicted stock prices will be rendered here -->
            </div>
        </section>

        <footer>
            <!-- Footer content here -->
        </footer>
    </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        // Example to dynamically generate a Plotly chart using data from the Django context
        // This assumes 'chart_data' is passed from Django view as a JSON string

        // Example data, replace with 'chart_data' passed from Django
        var chartData = JSON.parse('{{ chart_data|safe }}');

        var layout = {
            title: 'Predicted Stock Price',
            xaxis: {
                title: 'Date',
            },
            yaxis: {
                title: 'Closing Price (USD)',
            },
            plot_bgcolor: 'lightgrey',
            paper_bgcolor: 'whitesmoke',
            font: {color: 'darkblue'},
        };

        Plotly.newPlot('prediction-chart', [chartData], layout);
    </script>
{% endblock %}
